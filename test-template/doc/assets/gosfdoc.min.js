(function(w){var d="md";var i=".md";var c="config.json";var p="p";var b="t";var R="a";var P="v";var C="stickyItems";var K="language";var Q="version";var S="default";var M="1.0.0";var O=S;var r=null;var u=false;var f=null;var x=null;var y=null;var N=46;function z(U,V,T){this.key=U;this.hash=V;this.scrollTop=0;this.version=T}w(function(){hljs.configure({tabReplace:"    ",useBR:true});marked.setOptions({langPrefix:""});marked.setOptions({highlight:function(T,U){if(U){if(hljs.getLanguage(U)){return hljs.fixMarkup(hljs.highlightAuto(T,[U]).value)}else{return hljs.fixMarkup(hljs.highlightAuto(T).value)}}}});y=w("#main_content");E();k();h()});function E(){w.ajax({url:c,async:false,cache:false,type:"GET",dataType:"json"}).done(function(T){x=T;var U=v(p);L(T.Versions);s(T.ContentJson);e(T.AboutMd);t(T.Languages);U=F(T.Markdowns,U);if(U){w(".segment.intro").css("paddingTop","20px");A(U)}else{m()}}).fail(function(T,V,U){w("#btn_show_menu").click();w("#segment_intro").empty().html('Sorry! can not read "'+c+'" file.<br/><br/> try to use <code>gosfdoc</code> command run document: ')})}function k(){w("#btn_show_menu").click(function(){var T=w(this).text();w(this).text(T==">"?"<":">");w("#main_sidebar").sidebar("toggle")});w.each(w("#main_sidebar .item a.item"),function(V,Y){var W=w(Y);var U=W.html();U=U.replace(/\//g,"/<wbr>").replace(/\./g,".<wbr>");W.html(U);var T=W.outerWidth()-10;var X=D(Y);if(X>=T){W.popup({on:"hover",content:'<a href="'+W.attr("href")+'">'+W.text()+"</a>",transition:"none",position:"left center",className:{popup:"ui popup inverted item_popup"},onShow:function(ab){var af=w(".ui.popup.item_popup");var aa=parseFloat(af.css("top"));var ac=parseFloat(af.css("padding-top"));var ad=af.outerHeight();var ae=W.outerHeight();var Z=(ae-ad)/2;if(0>=Z){Z="0.8em"}else{aa=aa-Z+0.5;Z+=ac}af.css({left:"-11px",paddingTop:Z,paddingBottom:Z,top:aa}).mouseout(function(){w(this).hide();w(this).remove()})}})}});w("#item_about").click(function(){w("#about_modal").modal("setting",{duration:500}).modal("show");return false});w("#home").click(function(T){m()})}function h(){var X=-1;var Z=new Array();var W=20;var Y=false;w(window).scroll(function(ab){var ad=w(window).scrollTop();var ae=y.data(C);if(!ae){return}var aa=null;w.each(ae,function(af,ag){if(ad>=af){aa=ag}});if(aa){q(aa)}if(1<=X&&Z.length>=X){var ac=Z[X-1];if(ac){ac.scrollTop=w(window).scrollTop();Z[X-1]=ac}}});w(window).resize(function(ab){var aa=w("#sticky-wrapper");aa.css("height","auto");var ac=parseFloat(aa.css("top"));var ad=w(window);if(ad.height()-ac<aa.outerHeight()){aa.height(ad.height()-ac-10)}});var T=v(p);if(T){var V=window.location.hash;var U=new z(T,V,r);X=Z.push(U)}w(window).on("hashchange",function(){var ag=v(p);var ai=r;var ad=window.location.hash;if(!ag||Y){return}if(!u&&1<=X&&Z.length>=X){var af=Z[X-1];var aa=0;var ab=false;if(af){aa=af.scrollTop;ab=af.version}Y=true;if(ab){if(ab!=ai){w("#version_text").text(ab);w.each(w("div.item",w("#version_value")),function(ak,al){var aj=w(al);if(aj.attr("data-value")==ab){aj.addClass("active")}else{aj.removeClass("active")}});r=ab;if(null!=x){F(x.Markdowns,ag)}}}A(ag,aa);Y=false;return}var ah=false;if(0==Z.length){ah=true}else{if(1<=X&&Z.length>=X){var af=Z[X-1];if(af.key==ag&&ai==af.version){af.hash=ad;af.scrollTop=w(window).scrollTop();af.version=ai;Z[X-1]=af}else{ah=true;var ae=Z.length;for(var ac=X;ac<ae;ac++){Z.pop()}}}}if(ah){if(W<=Z.length){Z.shift()}var af=new z(ag,ad,ai);X=Z.push(af)}});w(document).keyup(function(ab){var ag=ab.which;switch(ag){case 38:var ah=w("#main_sidebar .menu a.item");var ae=ah.length;if(0<ae){var aa=0;w.each(ah,function(aj,ak){var ai=w(ak);if(ai.hasClass("active")){aa=aj-1;return false}return true});if(0>aa){ah.eq(ae-1).click()}else{ah.eq(aa).click()}}break;case 40:var ah=w("#main_sidebar .menu a.item");var ae=ah.length;if(0<ae){var aa=0;w.each(ah,function(aj,ak){var ai=w(ak);if(ai.hasClass("active")){aa=aj+1;return false}return true});if(ae<=aa){ah.eq(0).click()}else{ah.eq(aa).click()}}break;case 37:X--;if(1<=X&&Z.length>=X){var ad=Z[X-1];var af=v(p);var ac=v(P);if(af&&ac){if(ad.key!=af||ad.version!=ac){u=false;window.location.hash=ad.hash}}}else{if(1>=X){X=1}}break;case 39:X++;if(1<=X&&Z.length>=X){var ad=Z[X-1];var af=v(p);var ac=v(P);if(af&&ac){if(ad.key!=af||ad.version!=ac){u=false;window.location.hash=ad.hash}}}else{if(Z.length<=X){X=Z.length}}break}return false})}function m(){if(null==x){return}w(window).scrollTop(0);w(".segment.intro").css("paddingTop","");w("#main_sidebar a").removeClass("active");o(x.IntroMd);if(w("#main_sidebar").hasClass("active")){w("#btn_show_menu").click()}var U=w('<div class="ui list"></div>');var T=0;w.each(x.Markdowns,function(Y,ab){var aa=ab.Version;if(r!=aa){return true}var W=ab.MenuName;var Z=w('<div class="item"></div>');var V=w('<div class="content"><div class="header">'+W+"</div></div>");var X=w('<div class="list"></div>');w.each(ab.List,function(ah,af){var ac=af.Name;var ag=af.Desc;var ae=ac+i;var ad=w('<div class="item"><div class="content"><a class="header" href=?p='+ae+">"+ac+'</a><div class="description">'+ag+"</div></div></div>");w("a",ad).click(function(){w(window).scrollTop(0);if(!w(this).hasClass("active")){I(ae,false,false,r)}A(ae);return false});X.append(ad)});T++;Z.append(V);Z.append(X);U.append(Z)});if(0==T){U.html("No info data. Version: "+r)}y.attr("mdpath",null);y.empty().html(U);w("#sticky").empty().hide();y.css("marginLeft","20px");I(false,false,false,r)}function q(ad){var ac=w(window).scrollTop();var Y=w(ad);if(!Y.hasClass("active")){w("#sticky a").removeClass("active");w(ad).addClass("active");var T=v(p);var X=v(R);I(T,Y.text(),X,r);var U=w("#sticky-wrapper");var Z=parseFloat(U.css("top"));var aa=Y.offset().top-ac-Z;var W=Y.outerHeight();var ab=U.height();var V=U.scrollTop();if(aa+W>ab-V){U.scrollTop(V+W*2)}else{if(aa<V){U.scrollTop(V-W*2)}}}}function A(U,V){w("#segment_intro").empty();w(".segment.intro").css("paddingTop","20px");var X=w("#main_sidebar a");X.removeClass("active");w.each(X,function(Z,ab){var aa=w(ab);var Y=aa.attr("href");if(Y=="?"+p+"="+U){aa.addClass("active");return false}});var T=v(b);var W=v(R);I(U,T,W,r);y.removeData(C);w("#sticky").empty().hide();y.css("marginLeft","20px");l({path:U,async:true,dataType:"text",doneFunc:function(ah){y.empty().html(marked(ah));y.attr("mdpath",U);var ae=v(b);var ai=v(R);var ac=false;var aa={};w.each(w("h2",y),function(aj,am){var al=w(am);var ak=al.offset().top-N;aa[ak]=am});var af={};w.each(aa,function(ak,am){var al=w(am).text();var aj=w('<a class="item" href="javascript:;">'+al+"</a>");aj.click(function(){var ao=v(p);var an=v(b);I(ao,an,false,r);w(window).scrollTop(ak);return false});w("#sticky").append(aj);af[parseInt(ak)]=aj;if(ae==al&&!ac){ac=ak}});w.each(w("a",y),function(al,am){var ak=w(am);var aj=ak.attr("href");if(aj&&0<aj.length){if("#"==aj[0]){ak.click(function(){var at=w(this);var ao=at.attr("href");var au=at.text();if(!ao&&0>=ao.length){return false}var ap=ao.substring(1,ao.length);var av=v(p);var ar=v(b);if("#"!=au){var an=w("*[id='"+ap+"']",y);if(0==an.length){an=w("*[name='"+ap+"']",y)}if(0!=an.length){an=an.eq(0);var aq=an.offset().top-N;w(window).scrollTop(aq)}}else{I(av,ar,unescape(ap),r);n(window.location.href)}return false})}else{if(0==aj.indexOf("src.html")){ak.attr("target","_blank")}else{if(0==aj.indexOf("../")){aj=aj.replace(/\.\.\//g,"");ak.attr("href",aj)}}}}});if(ai){ai=escape(ai);var ad=w("*[id='"+ai+"']",y);if(0==ad.length){ad=w("*[name='"+ai+"']",y)}if(0!=ad.length){ad=ad.eq(0);ac=ad.offset().top-N}var Y=v(p);var ae=v(b);I(Y,ae,ai,r)}if(V){w(window).scrollTop(V)}else{if(ac){w(window).scrollTop(ac)}}if(0!=w("#sticky a").length){w("#sticky").show();y.css("marginLeft","170px");var Z=w("#sticky-wrapper");var ag=parseFloat(Z.css("top"));var ab=w(window);if(ab.height()-ag<Z.outerHeight()){Z.height(ab.height()-ag-10)}}y.data(C,af)},failFunc:function(){y.empty().html("Sorry! Can not load "+U);y.attr("mdpath","")}})}function F(Y,V){var U=null;var T=w("<div class=item></div>");var X=0;w.each(Y,function(aa,ae){var ac=ae.Version;if(r!=ac){return true}var Z=ae.MenuName;var ab=w('<div class="menu"></div>');var ad=w("<b>"+Z+"</b>");w.each(ae.List,function(aj,ai){var af=ai.Name;var ah=af+i;if(V){if(ah==V){U=V}}var ag=w('<a class="item" href=?p='+ah+">"+af+"</a>");ag.click(function(){if(!w(this).hasClass("active")){w(window).scrollTop(0);I(ah,false,false,r);A(ah)}return false});ab.append(ag)});X++;T.append(ad);T.append(ab)});if(0==X){T.html("No info data. Version: "+r)}var W=w("#menu_title");w("#main_sidebar").empty();w("#main_sidebar").append(W);w("#main_sidebar").append(T);return U}function L(V){var T=v(P);if(!T){T=g(Q)}if(T){r=T}var X="";var W=false;var U=w("#version_value");U.empty();w.each(V,function(aa,ac){var Z=ac.toString();var Y="";if(0==X.length){X=Z}if(r==Z){W=true;Y=" active"}var ab='<div class="item'+Y+'" data-value="'+Z+'">'+Z+"</div>";U.append(ab)});if(!W){if(0==X.length){r=M}else{r=X}}w("#version_text").text(r);w(".ui.dropdown.version").unbind().dropdown({on:"hover",onChange:function(ae,af){if(r==ae){return}w("#version_text").text(af);j(Q,ae);r=ae;var Z=v(p);var ac=v(b);var ab=v(R);I(Z,ac,ab,r);var aa=true;var ad=y.attr("mdpath");if(ad&&null!=x){var Y=F(x.Markdowns,ad);if(Y){A(Y);aa=false}}else{F(x.Markdowns,false)}if(aa){m()}}})}function t(V){var W=g(K);if(null!=W){O=W}var T="";var U=w("#language_value");U.empty();w.each(V,function(Y,ab){var aa="";var X="";w.each(ab,function(ad,ac){aa=ad;X=ac;return false});if(0==T.length){T=X}if(aa==O){T=X}var Z='<div class="item" data-value="'+aa+'">'+X+"</div>";U.append(Z)});w("#language_text").text(T);w(".ui.dropdown.language").unbind().dropdown({on:"hover",onChange:function(Y,Z){w("#language_text").text(Z);j(K,Y);O=Y;var X=y.attr("mdpath");if(X){A(X)}else{m()}}})}function e(T){l({path:T,async:true,dataType:"text",doneFunc:function(U){w("#about_content").empty().html(marked(U))},failFunc:function(){w("#about_content").empty().html("Can not read "+T+" version:"+r)}})}function s(T){l({path:T,async:true,dataType:"json",doneFunc:function(U){document.title=U.HtmlTitle;w("#doc_title").empty().html(U.DocTitle);w("#menu_title").empty().html(U.MenuTitle)},failFunc:function(){alert("Can not read "+T+" version:"+r)}})}function o(T){l({path:T,async:true,dataType:"text",doneFunc:function(U){w("#segment_intro").empty().html(marked(U))},failFunc:function(){w("#segment_intro").empty().html("Can not read "+T+" version:"+r)}})}function l(T){var U=w.extend({path:"",dataType:"text",async:false,cache:true,doneFunc:null,failFunc:null},T);w.ajax({url:J(U.path),async:U.async,cache:U.cache,type:"GET",dataType:U.dataType}).done(U.doneFunc).fail(function(){w.ajax({url:G(U.path),async:U.async,cache:U.cache,type:"GET",dataType:U.dataType}).done(U.doneFunc).fail(U.failFunc)})}function B(U){var T="";if(U&&0!=U.length){T="v"+U.replace(/\./g,"_")+"/"}return T}function J(U){var T=B(r);return T+d+"/"+O+"/"+U}function G(U){var T=B(r);return T+d+"/"+S+"/"+U}function a(U){var T=true;var V=d+"/"+S;var W=U.indexOf(V);if(0!=W){T=false}return T}function I(V,X,U,T){var W="";if(T){W+=P+"="+escape(T)}if(V){if(0!=W.length){W+="&"}W+=p+"="+escape(V)}if(X){if(0!=W.length){W+="&"}W+=b+"="+escape(X)}if(U){if(0!=W.length){W+="&"}W+=R+"="+escape(U)}u=true;window.location.hash=W;window.location.search="";window.location.query="";window.clearTimeout(f);f=window.setTimeout(function(){u=false},600)}function v(U){var X=unescape(window.location.search)+"&";if(X=="&"){X=unescape(window.location.hash)+"&"}var V=new RegExp(".*?[&\\?#]"+U+"=(.*?)&.*");var W=X.replace(V,"$1");var T=W==X?false:W;return T}function D(U){var T;var V=document.createElement("span");while(U.firstChild){V.appendChild(U.firstChild)}U.appendChild(V);T=V.offsetWidth;U.removeChild(V);while(V.firstChild){U.appendChild(V.firstChild)}return T}function j(T,U){var V=new Date();V.setTime(V.getTime()+30*24*60*60*1000);document.cookie=T+"="+escape(U)+";expires="+V.toGMTString()}function g(V){var U=null;var T,W=new RegExp("(^| )"+V+"=([^;]*)(;|$)");if(T=document.cookie.match(W)){U=(T[2])}return U}function H(T){var V=new Date();V.setTime(V.getTime()-1);var U=g(T);if(U!=null){document.cookie=T+"="+U+";expires="+V.toGMTString()}}function n(T){window.prompt("Copy link to clipboard?",T)}})(jQuery);